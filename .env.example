# =================================
# RAG Chat System - 환경 설정 파일
# =================================
# 이 파일을 복사해서 .env로 만들고 실제 값을 입력하세요.

# === OpenAI API 설정 ===
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=1000

# === 서버 설정 ===
HOST=0.0.0.0
PORT=8000
DEBUG=true
RELOAD=true

# === AI 모델 설정 ===
KANANA_MODEL_NAME=kakaocorp/kanana-1.5-2.1b-instruct-2505
KANANA_FINETUNED_PATH=./kanana-vector-restoration
DEVICE=auto
MODEL_DTYPE=bfloat16

# === 데이터베이스 설정 ===
CHROMA_DATA_PATH=./data/chroma_data
CHROMA_COLLECTION_NAME=kanana-docs-optimized

# === 메모리 관리 설정 ===
MEMORY_MAX_COUNT=30
MEMORY_AUTO_SAVE=true
MEMORY_SAVE_PATH=./data/memory

# === 검색 설정 ===
SEARCH_DEFAULT_RESULTS=3
SEARCH_MAX_RESULTS=10

# === 로깅 설정 ===
LOG_LEVEL=INFO
LOG_FILE_PATH=./logs/app.log
LOG_FILE_ROTATION=10 MB

# === CORS 설정 (쉼표로 구분) ===
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# === 성능 설정 ===
MAX_CONCURRENT_REQUESTS=10
REQUEST_TIMEOUT=300

# =================================
# 🚀 새로운 MLOps 파인튜닝 설정
# =================================

# === 파인튜닝 자동화 설정 ===
FINETUNE_ENABLED=true
FINETUNE_BATCH_SIZE=50
FINETUNE_AUTO_TRIGGER=true

# === 파인튜닝 데이터 경로 ===
FINETUNE_DATA_PATH=./data/finetune
FINETUNE_CONVERSATIONS_FILE=conversations.jsonl
FINETUNE_DATASET_FILE=training_dataset.json

# === 파인튜닝 모델 관리 ===
FINETUNE_MODELS_PATH=./models
FINETUNE_BACKUP_COUNT=3
FINETUNE_VERSION_PREFIX=v

# === 파인튜닝 하이퍼파라미터 ===
FINETUNE_EPOCHS=2
FINETUNE_LEARNING_RATE=1e-4
FINETUNE_LORA_R=16
FINETUNE_LORA_ALPHA=32
FINETUNE_LORA_DROPOUT=0.1

# === 대화 수집 설정 ===
CONVERSATION_COLLECTION_ENABLED=true
CONVERSATION_MIN_LENGTH=5
CONVERSATION_MAX_LENGTH=2000
CONVERSATION_FILTER_SYSTEM=true

# === 모니터링 설정 ===
FINETUNE_MONITORING_ENABLED=true
FINETUNE_WEBHOOK_URL=

# =================================
# 📝 설정 가이드
# =================================
#
# 🔧 필수 설정:
# - OPENAI_API_KEY: OpenAI API 키 (필수)
# - FINETUNE_BATCH_SIZE: 몇 개 대화 쌓이면 자동 학습할지
#
# 🤖 파인튜닝 설정:
# - FINETUNE_ENABLED=true: 파인튜닝 기능 활성화
# - FINETUNE_AUTO_TRIGGER=true: 배치 크기 도달 시 자동 실행
# - FINETUNE_BATCH_SIZE=50: 50개 대화마다 자동 학습 실행
#
# 📊 대화 수집 설정:
# - CONVERSATION_COLLECTION_ENABLED=true: 대화 자동 수집
# - CONVERSATION_MIN_LENGTH=5: 최소 5자 이상 대화만 수집
# - CONVERSATION_MAX_LENGTH=2000: 최대 2000자까지 수집
# - CONVERSATION_FILTER_SYSTEM=true: 시스템 메시지 자동 필터링
#
# 💾 경로 설정:
# - FINETUNE_DATA_PATH: 파인튜닝 데이터 저장 경로
# - FINETUNE_MODELS_PATH: 모델 저장 경로
# - FINETUNE_BACKUP_COUNT: 백업 모델 보관 개수
#
# 🎛️ 하이퍼파라미터:
# - FINETUNE_EPOCHS: 학습 에폭 수
# - FINETUNE_LEARNING_RATE: 학습률
# - FINETUNE_LORA_R: LoRA rank (높을수록 더 많은 파라미터)
# - FINETUNE_LORA_ALPHA: LoRA alpha (스케일링 팩터)
#
# =================================